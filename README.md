# webhook-telegram-notifier-bot

Позволяет уведомлять в телеграм через сообщения по вебхуку

## Как использовать

- Зайти в личку к своему телеграм-боту и написать ему `/savechat chatname`. Текущий чат запомнится как `chatname`. Один чат может иметь несколько имён.
- Чтобы отправить сообщение в чат достаточно отправить POST запрос на вебхук
    - можно отправить `curl -X POST http://localhost:8080/ -H "Content-Type: application/json" -d '{"chat": "chatname", "message": "test"}'`
    - можно отправить `curl -X POST http://localhost:8080/chatname -H "Content-Type: application/json" -d '{"message": "test"}'`

## Как создать свой инстанс бота

- Завести своего телеграм бота
- Запусттть приложение передав ему 2 параметра
    - `TG_TOKEN` - токен телеграм бота
    - `FILE_PATH` - путь до локального json файла с базой чатов. При первом запуске файл будет создан по указанному пути.
- Бот завернут в докер образ `msosnov/webhook-telegram-notifier-bot`, поэтому достаточно поднять докер образ, передав ему параметры и форварднув 8080 порт. `FILT_PATH` лучше маунтить

## Как разрабатывать

- Пиши тесты
- Пиши функционал
- Используй npm version для публикации новых версий. В npm пока ничего не публикуется, но github-actions настроены на сборку нового образа по git-tag